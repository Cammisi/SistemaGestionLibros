<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<BorderPane fx:id="rootPane" prefHeight="700.0" prefWidth="1000.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.libros.gestion_cliente.ui.controller.ReporteController">

    <stylesheets>
        <URL value="@../css/styles.css" />
    </stylesheets>

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-padding: 20; -fx-background-color: #333333;">
            <Label text="Gestión de Cobranzas y Visitas" styleClass="label-titulo" />
            <Region HBox.hgrow="ALWAYS" />
            <Button text="Volver al Menú" onAction="#volverAlMenu" prefWidth="150" style="-fx-background-color: #555555;"/>
        </HBox>
    </top>

    <center>
        <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: #2b2b2b;" BorderPane.alignment="CENTER">
            <Tab text="Emisión de Recibo de Cuota" style="-fx-text-fill: white;">
                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: #2b2b2b;">

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Buscar Cliente:" style="-fx-text-fill: white;"/>
                        <ComboBox fx:id="cmbClientesCobro" prefWidth="300" promptText="Seleccione Cliente..."/>
                        <Button text="Ver Cuotas Pendientes" onAction="#buscarCuotas" styleClass="boton-verde"/>
                    </HBox>

                    <Label text="Seleccione una cuota:" style="-fx-text-fill: white;"/>

                    <TableView fx:id="tablaCuotas" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colCuotaVenta" text="Venta / Factura" prefWidth="150"/>
                            <TableColumn fx:id="colCuotaNumero" text="Cuota #" prefWidth="80"/>
                            <TableColumn fx:id="colCuotaVencimiento" text="Vencimiento" prefWidth="120"/>
                            <TableColumn fx:id="colCuotaMonto" text="Monto" prefWidth="100"/>
                            <TableColumn fx:id="colCuotaEstado" text="Estado" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="15">
                        <Button text="Generar PDF Recibo" onAction="#generarReciboPdf" style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-weight: bold;"/>
                    </HBox>
                </VBox>
            </Tab>

            <Tab text="Hoja de Ruta - Clientes a Visitar" style="-fx-text-fill: white;">
                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: #2b2b2b;">

                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button text="Actualizar Lista" onAction="#cargarClientesLibres" />
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Exportar CSV" onAction="#exportarCsvVisitas" style="-fx-background-color: #27ae60; -fx-text-fill: white;"/>
                    </HBox>

                    <TableView fx:id="tablaVisitas" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colVisitaLocalidad" text="Localidad" prefWidth="150" style="-fx-font-weight: bold;"/>
                            <TableColumn fx:id="colVisitaCliente" text="Cliente" prefWidth="200"/>
                            <TableColumn fx:id="colVisitaTelefono" text="Teléfono" prefWidth="120"/>
                            <TableColumn fx:id="colVisitaHistorial" text="Libros ya comprados" prefWidth="250"/>
                            <TableColumn fx:id="colVisitaIntereses" text="Le gusta / Intereses" prefWidth="200"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

            <Tab text="Buscador por Tema" style="-fx-text-fill: white;">
                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: #2b2b2b;">

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Tema o Libro:" style="-fx-text-fill: white;"/>
                        <TextField fx:id="txtTema" promptText="Ej: Cocina, Policial, Historia..." prefWidth="300"/>
                        <Button text="Buscar Interesados" onAction="#buscarPorTema" styleClass="boton-verde"/>
                    </HBox>

                    <TableView fx:id="tablaInteresados" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colIntNombre" text="Cliente" prefWidth="200"/>
                            <TableColumn fx:id="colIntLocalidad" text="Localidad" prefWidth="150"/>
                            <TableColumn fx:id="colIntIntereses" text="Sus Intereses" prefWidth="300"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>